var Speech=Speech||function(){var o=!1,a=new SpeechSynthesisUtterance;a.rate=.6,a.onstart=function(){o=!0},a.onend=function(){o=!1,f++,r()},a.onpause=function(){},a.onresume=function(){o=!0};var u=[],f=-1,r=function(){o||0===u.length||((f<0||f>=u.length)&&(f=0),a.text=u[f],speechSynthesis.speak(a))};return{load:function(n,e,t,c){fetch(n).then(function(n){n.text().then(function(n){u=[],f=-1,0!==(u=function(n){for(var e=[],t=n.length,c=0,o="",a=null;c<t;){switch(a=n.charAt(c)){case"，":case"。":case"！":case"？":1<(o+=a).length&&e.push(o),o="";break;case"\n":case"\r":case"\t":case" ":break;case"“":for(o+=a,c++;c<t;){if(o+=a=n.charAt(c),"”"===a){e.push(o),o="";break}c++}break;default:o+=a}c++}return 0<o.length&&e.push(o),e}(n)).length&&(f=0,"function"==typeof t&&(a.onstart=function(){o=!0,t(f)}),"function"==typeof c&&(a.onend=function(){o=!1,c(f)}),"function"==typeof e?e(u):r())})})},play:r,prev:function(){f--},next:function(){f++}}}();